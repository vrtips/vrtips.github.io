<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="VRChat avatar creation blog for tips and tricks from a simple user 'Avatar Toggles'"><title>Avatar Toggles | SesiVR</title><meta property="og:title" content="Avatar Toggles"><meta property="og:type" content="article"><meta property="article:published_time" content="2021-08-10"><meta property="og:url" content="https://vrtips.github.io/posts/toggles/"><meta property="og:site_name" content="SesiVR"><meta property="og:image" content="https://vrtips.github.io/images/thumbnail.png"><meta property="og:tags" content="avatar"><meta property="og:tags" content="sdk3"><meta property="og:tags" content="toggles"><link rel=icon href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/vendor/bootstrap/bootstrap.min.css><link rel=stylesheet href=/vendor/magnific-popup/magnific-popup.css><link rel=stylesheet href=/vendor/wow/animate.css><link rel=stylesheet href=/css/style.css></head><body><header class=header-area><div class=container><div class=row><div class=col-12><nav class="navbar navbar-expand-lg"><a class=navbar-brand href=/><img src=/images/sesivrlogo.png alt=Logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#nav aria-controls=nav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=nav><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/>Blog</a></li><li class=nav-item><a class=nav-link href=/categories>Categories</a></li><li class=nav-item><a class=nav-link href=/tags>Tags</a></li></ul><div id=search-wrapper><form action=https://google.com/search><input type=search placeholder=Keyword name=q class=search>
<i class="fa fa-search"></i>
<input type=hidden name=sitesearch value=https://vrtips.github.io></form></div></div></div></nav></div></div></div></header><div class=top-area><div class="top-video top-video-small"><div id=waves class=video></div><div class=container><div class=title-message><a href=https://vrtips.github.io/posts/toggles/><h1>Avatar Toggles</h1></a></div></div></div></div><div class=container><div class="row justify-content-center"><div class="col-12 col-lg-8"><div class=post-title><a href=https://vrtips.github.io/posts/toggles/><div class=post-meta><time></time></div></a></div><section class=post-content><h1 id=avatar-toggles>Avatar Toggles</h1><p>In this post I want to showcase 2 ways to make avatar toggles for SDK3 avatars.</p><h2 id=methods>Methods</h2><p>There are 2 ways to make toggles, one is the most common ones if you look at tutorials online and follows the VRChat request/standard to not use &ldquo;Write Defaults&rdquo; in animations. The other is an alternative way that goes a bit against the standard put in by VRChat but is, in my opinion and only for simple toggles, a little bit faster and less prone to errors.</p><h2 id=requirements>Requirements</h2><ul><li>Knowing how to setup your avatar for SDK3 or an already setup project with an existing FX Layer and Menu system setup</li><li>Around 10 minutes</li></ul><h2 id=what-is-write-defaults>What is &ldquo;Write Defaults&rdquo;</h2><p>Let&rsquo;s first understand what the option of <code>Write Defaults</code> is&mldr;</p><p>Write defaults does this:</p><ul><li>Animator enters new state</li><li>State has Write Defaults</li><li>Game then sets all the defaults values to any parameter changed in the animation. This means that if by default something is off then at the beginning of the state this will be off again, doesnt matter what happened in the previous state</li><li>Plays the state animation</li></ul><p>So for example let&rsquo;s take this animation layer:</p><p><img src=https://i.imgur.com/uGXrYAA.png alt="Deagle Aniamtion"></p><p>All the states with the white X on a red background have the Write Defaults OFF, the rest have it ON (only the Idle state).<br>What does this do and why?<br>The reason for my choice of assignments is that I want the animations to occur one after the other keeping the changes from the previous state.<br>The first state moves the weapon&rsquo;s slide backwards and the second holds it there until I release the slide. The last state before the exit makes it slide back.<br>If I had Write defaults enabled on every state I should have manually added the changes of the previous one.<br>For example in the hold state I would have needed to tell it to stay back.<br>With them <strong>disabled</strong> I can just set the slide to go back on the first and play the sound, have it transition to the next state at the end of the animation and only have to turn the sound off and wait for the transition condition to happen so to move to the last state which will enable the sound and move the slide to the original position, then exit and go to the default state that has the Write Defaults <strong>ON</strong> which means everything will return to how it was setup originally.</p><p>At the end of the day, as the <a href=https://docs.vrchat.com/docs/avatars-30#write-defaults-on-states>VRChat documentation says</a> it&rsquo;s all a matter of convention. You can choose which ever you prefer or mix match them (unless you&rsquo;re working in a team, then please only stick to one). In my case I was lazy and didn&rsquo;t want to make an extra node to disable the last sound I had on the last state before the exit so I just enabled Write defaults on the Idle state but you can achieve the same result in all ways.</p><h2 id=common-steps>Common Steps</h2><p>Create a new animator layer in your <code>FX Animator</code>, name it as you like possibly following some sort of convention, in my case it&rsquo;s usually <code>ToggleObject</code><br><strong>REMEMBER</strong> to set the weight of the animator layer to 1</p><p><img src=https://i.imgur.com/s7xLZ7h.png alt="new layer"></p><p>Then we prepare the Animator parameter by adding it to both the Animator and the Avatar Parameters (Use <code>bool</code> as type for on/off toggles)</p><p><img src=https://i.imgur.com/f7b6xV7.png alt=paramter></p><p><img src=https://i.imgur.com/84slqEx.png alt="menu paramter"></p><p>Add a toggle to your Quick menu</p><p><img src=https://i.imgur.com/FVU3OCm.png alt="quick Menu toggle"></p><h2 id=first-method---offon-state>First Method - off/on state</h2><p>Since we are not using &ldquo;Write Defaults&rdquo; we will have to setup 2 different animations: On and Off.<br>For this post I will always setup my object as being be default off, so not visible, but if you want the opposite effect just invert everything I say.</p><h3 id=step-1-animations>Step 1: Animations</h3><p>Select your avatar (or a duplicate of it, for safety reasons) and assign to it your FX layer:</p><p><img src=https://i.imgur.com/FSyB7OZ.png alt="avatar select"></p><p><img src=https://i.imgur.com/YmHjQSz.png alt="FX layer assignment"></p><p>Then open the animator and animation windows</p><p><img src=https://i.imgur.com/mHYmQXs.png alt="windows to open"></p><p>And with your avatar (the one with the FX Layer set in the animator) still selected create 2 new clips:</p><ul><li>Animation for the object being ON</li><li>Animation for the object being OFF</li></ul><p><img src=https://i.imgur.com/pU4nbCf.png alt="new clip"></p><p><img src=https://i.imgur.com/xsa7TJJ.png alt="new clip"></p><p>Name them however you want, possibly referencing if it&rsquo;s the off or on version:</p><p><img src=https://i.imgur.com/uAKzp2f.png alt=naming></p><p>In case it isn&rsquo;t obvious, to switch from one animation to the other, once created, you click here:</p><p><img src=https://i.imgur.com/j34ftWs.png alt="animation switch"></p><p>For the ON version, start by <strong>disabling</strong> the object by clicking on it in the scene and disabling it from the inspector:</p><p><img src=https://i.imgur.com/zwmX5zh.png alt=disabling></p><p>Then in the animation window click on the record button:</p><p><img src=https://i.imgur.com/DhufiEH.png alt=record></p><p>And now Re-enable your object from the inspector. You should end up with something that looks like this:</p><p><img src=https://i.imgur.com/VilDMva.png alt=enabled></p><p><strong>REMEMBER</strong> to stop the keyframe recording by clicking on the record button again!!!</p><p>Now do the same for the OFF animation but starting with the object toggled ON from the inspector without being recorded, then record and disable the object.</p><p>We now have created the animation files, but they are automatically added to the default Layer on the animator. You can either drag and drop them from the Explorer window to the correct layer in the Animator window or simply <code>CTRL + C</code> <code>CTRL + V</code> the nodes from the base to the one you created earlier.</p><p><img src=https://i.imgur.com/UAi1iIM.png alt=angery></p><p><img src=https://i.imgur.com/ZLUZagi.png alt=kalm></p><h3 id=step-2-nodes-setup>Step 2: Nodes setup</h3><p>We will now setup our nodes and transitions.<br>I&rsquo;m still assuming that my default state, that is when I load the avatar for the first time and haven&rsquo;t used any toggle, is with the item OFF. If you need the opposite simply invert the nodes.</p><p>Set both the nodes (OFF and ON) with Write Defaults off:</p><p><img src=https://i.imgur.com/46iAWNb.png alt="Write Defaults"></p><p>Assign the OFF animation node as default state:</p><p><img src=https://i.imgur.com/KHqmxBk.gif alt="Set default"></p><p>Set the transitions between states:</p><p><img src=https://i.imgur.com/Xm1qa2m.gif alt=transitions></p><p>Click on the one that goes from OFF to ON and set it as in the picture</p><p><img src=https://i.imgur.com/lGNH1eE.png alt="Off to on"></p><p><img src=https://i.imgur.com/xbEGVNj.png alt=set></p><p>Do the same for the other transition (ON to OFF)</p><p><img src=https://i.imgur.com/h5IMi8S.png alt=set></p><p>And you&rsquo;re done!</p><h2 id=second-method---write-defaults-on>Second Method - Write Defaults ON</h2><p>In this case we only need 1 animation, the one that happens when the toggle is pressed.<br>In this post&rsquo;s case, that&rsquo;s the ON animation but as usual, invert it if you need the opposite behavior.<br>This method also has the advantage of not showing up in the avatar selection since the object will be disabled by default not from the animation but from the engine itself!</p><h3 id=step-1-animations-1>Step 1: Animations</h3><p>Select your avatar (or a duplicate of it, for safety reasons) and assign to it your FX layer:</p><p><img src=https://i.imgur.com/FSyB7OZ.png alt="avatar select"></p><p><img src=https://i.imgur.com/YmHjQSz.png alt="FX layer assignment"></p><p>Then open the animator and animation windows</p><p><img src=https://i.imgur.com/mHYmQXs.png alt="windows to open"></p><p>And with your avatar (the one with the FX Layer set in the animator) still selected create a new clip:</p><p><img src=https://i.imgur.com/pU4nbCf.png alt="new clip"></p><p><img src=https://i.imgur.com/xsa7TJJ.png alt="new clip"></p><p>Name it however you want, possibly referencing if it&rsquo;s the OFF or ON version:</p><p><img src=https://i.imgur.com/uAKzp2f.png alt=naming></p><p>In case it isn&rsquo;t obvious, to switch from one animation to the other, once created, you click here:</p><p><img src=https://i.imgur.com/j34ftWs.png alt="animation switch"></p><p><strong>Disable</strong> the object by clicking on it in the scene and disabling it from the inspector:</p><p><img src=https://i.imgur.com/zwmX5zh.png alt=disabling></p><p>Then in the animation window click on the record button:</p><p><img src=https://i.imgur.com/DhufiEH.png alt=record></p><p>And now Re-enable your object from the inspector. You should end up with something that looks like this:</p><p><img src=https://i.imgur.com/VilDMva.png alt=enabled></p><p><strong>REMEMBER</strong> to stop the keyframe recording by clicking on the record button again!!!</p><p>We now have created the animation file, but it&rsquo;s automatically added to the default Layer on the animator. You can either drag and drop it from the Explorer window to the correct layer in the Animator window or simply <code>CTRL + C</code> <code>CTRL + V</code> the node from the base layer to the one you created earlier.<br>You should have a layer setup like this:</p><p><img src=https://i.imgur.com/N4RQYSF.png alt=kalm></p><h3 id=step-2-nodes-setup-1>Step 2: Nodes setup</h3><p>Create a node WITHOUT any animation assigned to it and set it as default state. Additionally I usually rename this state to <code>Idle</code></p><p><img src=https://i.imgur.com/bobeSEI.gif alt="default empty"></p><p>Then create transitions from the empty state to the ON state and from the ON state to the EXIT node:</p><p><img src=https://i.imgur.com/DmYzF2m.gif alt="empty transitions"></p><p>And set the transitions like this</p><p><img src=https://i.imgur.com/mYF1uK7.png alt="set trans"></p><p><img src=https://i.imgur.com/aSrlYob.png alt="set trans2"></p><p>Now, before uploading your avatar, make sure that the object is in the default state you want it on, in my case it will need to be OFF (disabled). This way once I go to the menu and enable the toggle, the animation will turn it on and once I disable the toggle it will revert to the default state (which was disabled)</p><h2 id=conclusions>Conclusions</h2><p>I hope this guide helps you set up toggles correctly and maybe choose which way to set them up. For toggles that don&rsquo;t require anything more than enabling and disabling an object I always use the second method since its faster to setup and leads to less errors by my side so that&rsquo;s my general suggestion. The final word is still yours on your way and neither is wrong or right.</p></section><time><i class="far fa-clock"></i>
Tuesday, Aug 10, 2021 14:31</time><hr class=summary-sep><div class=recommend-articles><h3>Recommend these articles</h3><ul><li><a href=https://vrtips.github.io/about/ rel=prev><span>About</span></a></li><li><a href=https://vrtips.github.io/posts/small/ rel=next><span>Avatars under the minimum size limit</span></a></li></ul></div></div><div id=sidebar class="col-12 col-md-8 col-lg-4"><div class=post-sidebar-area><div id=post-toc class=sidebar-widget-area><div class=title><i class="fa fa-list"></i>
TOC</div><div class=widget-content><nav id=TableOfContents><ul><li><a href=#methods>Methods</a></li><li><a href=#requirements>Requirements</a></li><li><a href=#what-is-write-defaults>What is &ldquo;Write Defaults&rdquo;</a></li><li><a href=#common-steps>Common Steps</a></li><li><a href=#first-method---offon-state>First Method - off/on state</a><ul><li><a href=#step-1-animations>Step 1: Animations</a></li><li><a href=#step-2-nodes-setup>Step 2: Nodes setup</a></li></ul></li><li><a href=#second-method---write-defaults-on>Second Method - Write Defaults ON</a><ul><li><a href=#step-1-animations-1>Step 1: Animations</a></li><li><a href=#step-2-nodes-setup-1>Step 2: Nodes setup</a></li></ul></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></div></div><div class=sidebar-widget-area><div class=title><i class="fa fa-tag"></i>
Tags</div><div class=widget-content><a href=https://vrtips.github.iotags/avatar class="badge badge-secondary">avatar</a>
<a href=https://vrtips.github.iotags/sdk3 class="badge badge-secondary">sdk3</a>
<a href=https://vrtips.github.iotags/toggles class="badge badge-secondary">toggles</a></div></div></div></div></div></div><footer class=footer-area><div class=container><div class=row><div class="col-12 col-md-4"><div class=footer-single-widget><div class="copywrite-text mt-30"><p>Copyright &copy;
<script>document.write((new Date).getFullYear())</script>All rights reserved</p><p>Made with by Gyuha</p></div></div></div></div></div></footer><script src=/vendor/jquery-2.2.4.min.js></script>
<script src=/vendor/bootstrap/popper.min.js></script>
<script src=/vendor/bootstrap/bootstrap.min.js></script>
<script src=/vendor/native-console.js></script>
<script src=/vendor/jquery.easing.1.3.js></script>
<script src=/vendor/jquery.scrollUp.min.js></script>
<script src=/js/active.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script src=//cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js></script>
<script src=//cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js></script>
<script>$(function(){window.VANTA&&window.VANTA.NET({el:"#waves",mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1,color:4171007})})</script></body></html>